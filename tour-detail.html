<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tour Details - Cycle Tuscany</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="styles/tailwind.config.js"></script>
    <script type="module" src="components/site-header.js"></script>
    <script type="module" src="components/tours/gpx-elevation-chart.js"></script>
    <script type="module" src="components/tours/tour-itinerary.js"></script>
    <script type="module" src="data/tours-data.js"></script>
    <script type="module" src="components/tours/similar-tours-section.js"></script>
    <script type="module" src="components/tours/tour-calendar-modal-content.js"></script>
    <script type="module" src="components/tours/tour-image-gallery-modal.js"></script>
    <script type="module" src="components/site-footer.js"></script>
    <script type="module" src="components/mailing-list/mailing-list-subscribe.js"></script>
    <script type="module" src="components/tours/tour-hero-section.js"></script>
    <script type="module" src="components/tours/tour-info-row-section.js"></script>
    <script type="module" src="components/tours/tour-sidebar-section.js"></script>
    <script type="module" src="components/tours/tour-luxury-section.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&family=Parisienne&display=swap" rel="stylesheet">
</head>
<body class="font-sans bg-white text-primary">
    <script>
        let currentTourData = null; 
        let nextAvailableTourData = null;

        // Moved toggleAccordion to global scope
        function toggleAccordion(headerElement) {
            const accordionContent = headerElement.nextElementSibling;
            if (accordionContent.classList.contains('hidden')) {
                accordionContent.classList.remove('hidden');
                accordionContent.style.maxHeight = '9999px'; 

                const gpxChartElement = accordionContent.querySelector('gpx-elevation-chart');
                if (gpxChartElement && typeof gpxChartElement.redraw === 'function') {
                    setTimeout(() => gpxChartElement.redraw(), 300); 
                }

            } else {
                accordionContent.style.maxHeight = "0";
                setTimeout(() => {
                    accordionContent.classList.add('hidden');
                }, 300);
            }
        }
    </script>

    <script type="module" src="components/tours/tour-detail-app.js"></script>
    <tour-detail-app></tour-detail-app>
    <!-- Modals controlled by the app shell -->
    <tour-calendar-modal-content id="calendar-modal"></tour-calendar-modal-content>
    <tour-image-gallery-modal id="gallery-modal"></tour-image-gallery-modal>
    <!-- All logic and rendering is now handled by <tour-detail-app> -->
</body>
</html>